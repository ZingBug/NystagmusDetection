### NystagmusDetection 
### Eye Pupil Localization OpenCV 3.20 for Android 
### JavaCv 
### 眼球震动定位检测

### 2018年10月17日
-加入录制视频功能。

### 2018年6月23日
- 各机型本地视频测试对比
- APP测试时长越短，代表该机型手机处理越流畅、速度越快。

|机型 | SOC型号 |视频时长| 视频帧率 | APP测试时长|
|----- | :---: | :----: |  :----: | ---:|
|乐视2 | 联发科X20| 19秒 |50帧/秒 |75秒 |
|华为P9 | 麒麟955| 19秒 |50帧/秒 |24秒 |
|华为荣耀V10 | 麒麟970| 19秒 |50帧/秒 |32秒 |
|小米8 | 骁龙845| 19秒 |50帧/秒 |18秒 |
### 2018年6月22日
- 大版本更改。
- 将生产者消费者设计模式去除，将双眼处理从接收图像开始就分开为两个线程，其中图像处理和图像参数计算都重新设计为将单眼作为对象。
- 线程采用AsyncTask方法，代替之前简单的thread方法。
- 程序变得更加简洁易懂。
### 2018年4月20日
- 减少读取线程每帧之间的读取间隔时间，能够有效降低在线视频的延迟情况。
- 增加每秒处理帧数显示。
### 2018年3月15日
- 解决从视频列表测试视频异常或卡死的bug。解决方法是在进入视频列表活动时，停止现在进行的视频测试。
### 2018年3月14日
- 解决停止视频和重新打开视频时卡住的bug。视频播放结束后，清空图像阻塞队列。
### 2018年3月13日
- 将之前通过定时器来进行图像读取处理的方式，更改为，将图像读取和处理分别各用一个线程来实现。
- 但这次也有一个未来可以改进的点，每次启动视频时都要新建线程，之后可以更改为额外线程一直保持，当有视频启动时则唤醒线程，没有视频时则休眠线程的方式。
- 线程休眠唤醒可以通过object.wait()/object.notifyAll()来配合实现。
### 2018年2月25日
- 更改部分项目配置，将项目移植到Android studio 3版本。
- 更改UI更新时用到的Handle，解决之前android handler的警告Handler Class Should be Static or Leaks Occur。
### 2018年1月4日
- 增加对全面屏手机（屏幕比例为18：9）的支持，比如三星note8、小米MIX2等。
- 增加APP检验主界面屏幕常亮。
### 2017年12月27日
- 优化瞳孔数据分析处理算法，比如将之前两点求直线斜率改为二乘法拟合斜率等。
### 2017年12月26日
- 优化图像识别处理算法，使瞳孔识别更加准确。
### 2017年9月30日
- 眼睛瞳孔定位从圆圈显示改为十字光标显示。
- 增加旋转曲线显示，就是每一帧比上一帧的旋转角度曲线。
### 2017年9月27日
- 增加Back键监听，拦截Back键，使App进入后台而不是关闭。
### 2017年9月16日
- 增加眼震视频垂直Y轴的SPV检测。
### 2017年9月15日
- 在视频列表界面增加视频搜索框，可以搜索视频名称。
### 2017年9月14日
- 增加视频列表页，用于显示眼震仪记录的视频。在列表中，可以对视频进行打开测试、重命名和删除操作。
- 在设置界面增加清除缓存按钮，用于清除Glide的图片缓存，并为此新建一个Glide缓存工具类。
### 2017年9月11日
- 针对两个摄像头同样分辨率下是图像相同的bug，此处采用在一个视频图像中缩减一点分辨率，使其相当于变成两个不同的分辨率，分辨率缩减很小，从图像上看不出来。这个小方法解决了之前的bug，树莓派两个摄像头可以设置成一样的分辨率了。
### 2017年8月29日
- 添加视频保存功能，打开摄像头开始测试后，会自动保存当前原始视频，视频保存名称为开始测试时间，视频格式为MP4，视频保存路径在手机内置存储根目录。
### 2017年8月24日
- 应用禁用多窗口模式，即不允许按照安卓7.0的方式进行应用分屏操作，即无法在小米MIUI8、华为EMUI5.0以上版本使用分屏。
### 2017年8月22日
- 修改ping测试操作，之前在连入局域网但无法接入外网时会阻塞在ping操作中，设置ping操作延迟为1s。
- 主要类函数增加注释。
### 2017年8月21日
- 优化修改SPV相关程序。
- 在设置界面增加图像识别灰度值设置功能，并在文本输入时增加了文本监听。
### 2017年8月20日
- 打开两个分辨率相同的摄像头时，会出现接收显示的图像一样。但对于不同分辨率摄像头就不会存在这个问题。怀疑是类库出现了bug。
### 2017年8月19日
- 增加左右眼震方向判断及显示。
- 增加在播放摄像头在线视频时，使图像旋转180°。因为眼罩上的摄像头是反向安装的。
### 2017年8月16日
- 增加应用横屏显示，能够根据手机重力自动切换竖屏与横屏。
- 由于在横竖屏幕切换过程中调用了onCreate等函数，所以切换后无法复现之前数据，并由于数据量很大，未找到数据恢复的办法，有待于后期优化。
### 2017年8月15日
- 引入开源的FFMEG解码器，选用图像抓取函数FFmpegFrameGrabber，能够成功打开各种格式视频以及摄像头（不只是MJPEG）。
- 相应引入javacv库，替换之前的官方opencv库，重写图像处理函数。
- 增加诊断结果显示，测试结束后显示诊断结果。
### 2017年8月9日
- 增加最大眼震反应期实时显示.
### 2017年8月8日
- 修改界面，增加悬浮按钮，用以代替button。显示更加紧凑，可以在一个界面内等比例布局，不再需要滚动界面。
### 2017年8月7日
- 增加SPV数据显示，实时处理SPV数据并显示出来。
- 由于增加显示区域，所以之前一个界面无法全部显示出来，选用滚动界面布局设计，用以滚动显示。
### 2017年8月6日
- 增加SPV检测，对波形的锯齿波进行慢相角速度检测，并得出最大眼震反应期。
### 2017年8月2日
- 加入选取本地视频时单眼和双眼自动判断处理。
### 2017年7月31日
- 增加介绍界面标题图片，并能联网自动更新必应的每日一图。
### 2017年7月29日
- 在侧滑栏添加介绍界面，用于介绍学校信息等。
- 在侧滑栏添加设置界面，用于更改摄像头网络地址。
- 树莓派上传输的视频编码为MJPEG，所以按理说用opencv能够直接打开。
### 2017年7月24日
- 增加侧滑菜单栏与介绍详情界面，更换配色，结果都不好。
- 增加打开网络摄像头，但还没有测试。
### 2017年7月22日
- 增加MPAndroidChart控件来实现绘制实时波形图。
- 波形图实时刷新有问题，有时后让程序崩溃，后来将波形图刷新数据强制放到UI线程执行，暂时解决了这个问题。
- 重绘按钮样式，做扁平化处理。更改状态栏使之沉浸，并更改导航栏颜色，使之统一。
### 2017年7月21日
- 重绘界面，并使图像充满ImageView控件播放。
- 选取本地视频能够走一边opencv的图像识别处理过程，并能正常显示。
### 2017年7月20日
- 经过几天测试，可以实现用opencv的VideoCapture进行本地视频读取。
- VideoCapture要求视频编码必须为MJPEG格式。
- 用定时器的时候，注意不要直接在其他线程里修改UI，可以调用来Handler来间接修改更新UI。

